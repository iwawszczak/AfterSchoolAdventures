const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/leaflet.CIGW-MKW.css"])))=>i.map(i=>d[i]);
import"../chunks/DsnmJJEf.js";import{o as ba,a as Va,e as We,s as O,d as ea}from"../chunks/BjE_PdnF.js";import{I as Ze,h as W,aF as Me,K as Ta,D as fa,C as Ha,o as a,_ as Ba,F as Ja,H as Ka,G as ga,J as na,S as be,al as Aa,aO as Wa,M as ma,P as Za,aZ as aa,a_ as ta,O as ze,a$ as Pa,aK as Sa,aB as Ea,ac as Ya,ai as _a,ak as ha,Q as Ga,R as Qa,b0 as da,q as Xa,at as Ca,b1 as et,b2 as at,az as Ia,b3 as tt,aJ as rt,b4 as lt,a2 as La,t as B,b5 as it,aP as st,aH as ot,aN as ya,b6 as nt,b7 as $a,T as dt,b8 as ct,b9 as vt,aC as ut,ae as ft,l as mt,V as pt,ba as bt,x as De,k as Re,i as M,e as I,y as Fe,z as s,B as c,A as i,c as Ma,f as Ye,af as Na,ad as K,$ as ge,a0 as E,au as Oa,d as gt,bb as _t}from"../chunks/9slfmGyj.js";import{p as te,_ as Qe,b as Ra,i as ce}from"../chunks/BWO8fqZr.js";import{r as Te,a as xa}from"../chunks/B4sDxMi4.js";function _e(t,r){return r}function ht(t,r,e){for(var l=t.items,d=[],n=r.length,o=0;o<n;o++)tt(r[o].e,d,!0);var u=n>0&&d.length===0&&e!==null;if(u){var p=e.parentNode;rt(p),p.append(e),l.clear(),ae(t,r[0].prev,r[n-1].next)}lt(d,()=>{for(var k=0;k<n;k++){var T=r[k];u||(l.delete(T.k),ae(t,T.prev,T.next)),Ca(T.e,!u)}})}function de(t,r,e,l,d,n=null){var o=t,u={flags:r,items:new Map,first:null},p=(r&Pa)!==0;if(p){var k=t;o=W?Ze(Me(k)):k.appendChild(Ta())}W&&fa();var T=null,y=!1,C=new Map,L=Ba(()=>{var w=e();return Ea(w)?w:w==null?[]:Sa(w)}),x,h;function m(){yt(h,x,u,C,o,d,r,l,e),n!==null&&(x.length===0?T?Ga(T):T=ma(()=>n(o)):T!==null&&Qa(T,()=>{T=null}))}Ha(()=>{h??=La,x=a(L);var w=x.length;if(y&&w===0)return;y=w===0;let z=!1;if(W){var g=Ja(o)===Ka;g!==(w===0)&&(o=ga(),Ze(o),na(!1),z=!0)}if(W){for(var S=null,P,b=0;b<w;b++){if(be.nodeType===Aa&&be.data===Wa){o=be,z=!0,na(!1);break}var j=x[b],$=l(j,b);P=pa(be,u,S,null,j,$,b,d,r,e),u.items.set($,P),S=P}w>0&&Ze(ga())}if(W)w===0&&n&&(T=ma(()=>n(o)));else if(Za()){var Z=new Set,Q=ze;for(b=0;b<w;b+=1){j=x[b],$=l(j,b);var A=u.items.get($)??C.get($);A?(r&(aa|ta))!==0&&Da(A,j,b,r):(P=pa(null,u,null,null,j,$,b,d,r,e,!0),C.set($,P)),Z.add($)}for(const[G,q]of u.items)Z.has(G)||Q.skipped_effects.add(q.e);Q.add_callback(m)}else m();z&&na(!0),a(L)}),W&&(o=be)}function yt(t,r,e,l,d,n,o,u,p){var k=(o&at)!==0,T=(o&(aa|ta))!==0,y=r.length,C=e.items,L=e.first,x=L,h,m=null,w,z=[],g=[],S,P,b,j;if(k)for(j=0;j<y;j+=1)S=r[j],P=u(S,j),b=C.get(P),b!==void 0&&(b.a?.measure(),(w??=new Set).add(b));for(j=0;j<y;j+=1){if(S=r[j],P=u(S,j),b=C.get(P),b===void 0){var $=l.get(P);if($!==void 0){l.delete(P),C.set(P,$);var Z=m?m.next:x;ae(e,m,$),ae(e,$,Z),ca($,Z,d),m=$}else{var Q=x?x.e.nodes_start:d;m=pa(Q,e,m,m===null?e.first:m.next,S,P,j,n,o,p)}C.set(P,m),z=[],g=[],x=m.next;continue}if(T&&Da(b,S,j,o),(b.e.f&da)!==0&&(Ga(b.e),k&&(b.a?.unfix(),(w??=new Set).delete(b))),b!==x){if(h!==void 0&&h.has(b)){if(z.length<g.length){var A=g[0],G;m=A.prev;var q=z[0],J=z[z.length-1];for(G=0;G<z.length;G+=1)ca(z[G],A,d);for(G=0;G<g.length;G+=1)h.delete(g[G]);ae(e,q.prev,J.next),ae(e,m,q),ae(e,J,A),x=A,m=J,j-=1,z=[],g=[]}else h.delete(b),ca(b,x,d),ae(e,b.prev,b.next),ae(e,b,m===null?e.first:m.next),ae(e,m,b),m=b;continue}for(z=[],g=[];x!==null&&x.k!==P;)(x.e.f&da)===0&&(h??=new Set).add(x),g.push(x),x=x.next;if(x===null)continue;b=x}z.push(b),m=b,x=b.next}if(x!==null||h!==void 0){for(var F=h===void 0?[]:Sa(h);x!==null;)(x.e.f&da)===0&&F.push(x),x=x.next;var N=F.length;if(N>0){var Y=(o&Pa)!==0&&y===0?d:null;if(k){for(j=0;j<N;j+=1)F[j].a?.measure();for(j=0;j<N;j+=1)F[j].a?.fix()}ht(e,F,Y)}}k&&Xa(()=>{if(w!==void 0)for(b of w)b.a?.apply()}),t.first=e.first&&e.first.e,t.last=m&&m.e;for(var X of l.values())Ca(X.e);l.clear()}function Da(t,r,e,l){(l&aa)!==0&&ha(t.v,r),(l&ta)!==0?ha(t.i,e):t.i=e}function pa(t,r,e,l,d,n,o,u,p,k,T){var y=(p&aa)!==0,C=(p&et)===0,L=y?C?Ya(d,!1,!1):_a(d):d,x=(p&ta)===0?o:_a(o),h={i:x,v:L,k:n,a:null,e:null,prev:e,next:l};try{if(t===null){var m=document.createDocumentFragment();m.append(t=Ta())}return h.e=ma(()=>u(t,L,x,k),W),h.e.prev=e&&e.e,h.e.next=l&&l.e,e===null?T||(r.first=h):(e.next=h,e.e.next=h.e),l!==null&&(l.prev=h,l.e.prev=h.e),h}finally{}}function ca(t,r,e){for(var l=t.next?t.next.e.nodes_start:e,d=r?r.e.nodes_start:e,n=t.e.nodes_start;n!==null&&n!==l;){var o=Ia(n);d.before(n),n=o}}function ae(t,r,e){r===null?t.first=e:(r.next=e,r.e.next=e&&e.e),e!==null&&(e.prev=r,e.e.prev=r&&r.e)}function xt(t,r,e=!1,l=!1,d=!1){var n=t,o="";B(()=>{var u=La;if(o===(o=r()??"")){W&&fa();return}if(u.nodes_start!==null&&(it(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),o!==""){if(W){be.data;for(var p=fa(),k=p;p!==null&&(p.nodeType!==Aa||p.data!=="");)k=p,p=Ia(p);if(p===null)throw st(),ot;ya(be,k),n=Ze(p);return}var T=o+"";e?T=`<svg>${T}</svg>`:l&&(T=`<math>${T}</math>`);var y=nt(T);if((e||l)&&(y=Me(y)),ya(Me(y),y.lastChild),e||l)for(;Me(y);)n.before(Me(y));else n.before(y)}})}const wa=[...` 	
\r\f \v\uFEFF`];function wt(t,r,e){var l=t==null?"":""+t;if(r&&(l=l?l+" "+r:r),e){for(var d in e)if(e[d])l=l?l+" "+d:d;else if(l.length)for(var n=d.length,o=0;(o=l.indexOf(d,o))>=0;){var u=o+n;(o===0||wa.includes(l[o-1]))&&(u===l.length||wa.includes(l[u]))?l=(o===0?"":l.substring(0,o))+l.substring(u+1):o=u}}return l===""?null:l}function kt(t,r){return t==null?null:String(t)}function Ne(t,r,e,l,d,n){var o=t.__className;if(W||o!==e||o===void 0){var u=wt(e,l,n);(!W||u!==t.getAttribute("class"))&&(u==null?t.removeAttribute("class"):t.className=u),t.__className=e}else if(n&&d!==n)for(var p in n){var k=!!n[p];(d==null||k!==!!d[p])&&t.classList.toggle(p,k)}return n}function Xe(t,r,e,l){var d=t.__style;if(W||d!==r){var n=kt(r);(!W||n!==t.getAttribute("style"))&&(n==null?t.removeAttribute("style"):t.style.cssText=n),t.__style=r}return l}function Fa(t,r,e=!1){if(t.multiple){if(r==null)return;if(!Ea(r))return ct();for(var l of t.options)l.selected=r.includes(Oe(l));return}for(l of t.options){var d=Oe(l);if(vt(d,r)){l.selected=!0;return}}(!e||r!==void 0)&&(t.selectedIndex=-1)}function jt(t){var r=new MutationObserver(()=>{Fa(t,t.__value)});r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ut(()=>{r.disconnect()})}function zt(t,r,e=r){var l=!0;$a(t,"change",d=>{var n=d?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(n),Oe);else{var u=t.querySelector(n)??t.querySelector("option:not([disabled])");o=u&&Oe(u)}e(o)}),dt(()=>{var d=r();if(Fa(t,d,l),l&&d===void 0){var n=t.querySelector(":checked");n!==null&&(d=Oe(n),e(d))}t.__value=d,l=!1}),jt(t)}function Oe(t){return"__value"in t?t.__value:t.value}function Ke(t,r,e=r){var l=new WeakSet;$a(t,"input",async d=>{var n=d?t.defaultValue:t.value;if(n=va(t)?ua(n):n,e(n),ze!==null&&l.add(ze),await ft(),n!==(n=r())){var o=t.selectionStart,u=t.selectionEnd;t.value=n??"",u!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(u,t.value.length))}}),(W&&t.defaultValue!==t.value||mt(r)==null&&t.value)&&(e(va(t)?ua(t.value):t.value),ze!==null&&l.add(ze)),pt(()=>{var d=r();if(t===document.activeElement){var n=bt??ze;if(l.has(n))return}va(t)&&d===ua(t.value)||t.type==="date"&&!d&&!t.value||d!==t.value&&(t.value=d??"")})}function va(t){var r=t.type;return r==="number"||r==="range"}function ua(t){return t===""?null:+t}const Ae=[{key:"dance",label:"Taniec",color:"#ec4899"},{key:"gymnastics",label:"Gimnastyka",color:"#f97316"},{key:"football",label:"Piłka nożna",color:"#22c55e"},{key:"english",label:"Język angielski",color:"#3b82f6"},{key:"spanish",label:"Język hiszpański",color:"#3b82f6"},{key:"arts",label:"Plastyka",color:"#8b5cf6"},{key:"music",label:"Muzyka",color:"#eab308"},{key:"chess",label:"Szachy",color:"#a16207"},{key:"martial_arts",label:"Sztuki walki",color:"#dc2626"},{key:"robotics",label:"Robotyka",color:"#7c3aed"},{key:"theatre",label:"Teatr / Drama",color:"#ef4444"},{key:"coding",label:"Programowanie",color:"#0ea5e9"},{key:"math_club",label:"Kółko matematyczne",color:"#0284c7"},{key:"nature",label:"Przyroda / ekologia",color:"#65a30d"},{key:"swimming",label:"Pływanie",color:"#06b6d4"},{key:"athletics",label:"Lekkoatletyka",color:"#f59e0b"},{key:"basketball",label:"Koszykówka",color:"#ea580c"},{key:"volleyball",label:"Siatkówka",color:"#16a34a"},{key:"scouts",label:"Harcerstwo / skauting",color:"#15803d"},{key:"photography",label:"Fotografia",color:"#6d28d9"},{key:"crafts",label:"Rękodzieło",color:"#a855f7"},{key:"cooking",label:"Gotowanie",color:"#d97706"}],qa=[{min:0,max:1,label:"0-1 lat"},{min:2,max:3,label:"2-3 lata"},{min:3,max:4,label:"3-4 lata"},{min:5,max:6,label:"5-6 lat"},{min:7,max:8,label:"7-8 lat"},{min:9,max:10,label:"9-10 lat"},{min:11,max:12,label:"11-12 lat"},{min:13,max:14,label:"13-14 lat"},{min:15,max:16,label:"15-16 lat"}];var Tt=M('<div class="w-full h-full min-h-[400px]"></div>');function ka(t,r){De(r,!0);let e=te(r,"places",19,()=>[]),l=te(r,"selectedPlace",3,null),d=te(r,"onPlaceSelect",3,()=>{}),n,o,u=[],p;ba(async()=>{p=await Qe(()=>import("../chunks/7ah4FPQk.js").then(y=>y.l),[],import.meta.url),await Qe(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),delete p.Icon.Default.prototype._getIconUrl,p.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),o=p.map(n).setView([50.0647,19.945],11),p.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(o),k()}),Va(()=>{o&&o.remove()});function k(){!p||!o||(u.forEach(y=>o.removeLayer(y)),u=[],e().forEach(y=>{const C=[...new Set(y.activities.map(g=>g.type))],L=C.map(g=>Ae.find(S=>S.key===g));let x;C.length===1?x=`<div style="
          background-color: ${L[0]?.color||"#3b82f6"};
          width: 20px;
          height: 20px;
          border-radius: 50%;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        "></div>`:x=`<div style="
          width: 20px;
          height: 20px;
          border-radius: 50%;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
          background: conic-gradient(from 0deg, ${L.map(S=>S?.color||"#3b82f6").slice(0,3).join(", ")});
        "></div>`;const h=p.divIcon({className:"custom-marker",html:x,iconSize:[20,20],iconAnchor:[10,10]}),m=p.marker([y.location.lat,y.location.lng],{icon:h}).addTo(o),w=y.activities.map(g=>{const S=Ae.find(b=>b.key===g.type),P=g.ageGroups.length===1?`${g.ageGroups[0]} lat`:`${Math.min(...g.ageGroups)}-${Math.max(...g.ageGroups)} lat`;return`
          <div class="mb-3 p-2 border rounded">
            <strong>${g.name}</strong><br>
            <span class="text-sm text-gray-600">
              Typ: ${S?.label||g.type}<br>
              Wiek: ${P}
            </span>
          </div>
        `}).join(""),z=`
        <div class="p-2">
          <h3 class="font-bold text-lg mb-2">${y.name}</h3>
          <p class="text-sm text-gray-600 mb-2">
            <strong>Adres:</strong> ${y.location.address}
          </p>
          <div class="mt-2">
            <strong class="text-sm">Dostępne zajęcia:</strong>
            ${w}
          </div>
        </div>
      `;m.bindPopup(z),m.on("click",()=>{d()(y)}),u.push(m)}))}Re(()=>{console.log("Effect triggered, L:",!!p,"map:",!!o,"places:",e().length),p&&o&&e()&&k()}),Re(()=>{if(p&&o&&l()){o.setView([l().location.lat,l().location.lng],15);const y=u.find(C=>{const L=C.getLatLng();return L.lat===l().location.lat&&L.lng===l().location.lng});y&&y.openPopup()}});var T=Tt();Ra(T,y=>n=y,()=>n),I(t,T),Fe()}var At=M('<label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"/> <div class="flex items-center space-x-2"><div class="w-3 h-3 rounded-full"></div> <span class="text-sm text-gray-700"> </span></div></label>'),Pt=M('<label class="flex items-center space-x-2 cursor-pointer"><input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700"> </span></label>'),St=M('<div class="bg-white p-4 rounded-lg shadow-md"><div class="flex justify-between items-center mb-4"><h2 class="text-lg font-semibold text-gray-800">Filtry</h2> <button class="text-sm text-blue-600 hover:text-blue-800 underline">Wyczyść wszystkie</button></div> <div class="mb-6"><h3 class="text-md font-medium text-gray-700 mb-3">Typ aktywności</h3> <div class="space-y-2"></div></div> <div><h3 class="text-md font-medium text-gray-700 mb-3">Grupa wiekowa</h3> <div class="space-y-2"></div></div></div>');function ja(t,r){De(r,!0);let e=te(r,"selectedTypes",19,()=>[]),l=te(r,"selectedAgeGroups",19,()=>[]),d=te(r,"onTypeChange",3,()=>{}),n=te(r,"onAgeGroupChange",3,()=>{});function o(m){const w=e().includes(m)?e().filter(z=>z!==m):[...e(),m];d()(w)}function u(m){const w=l().includes(m)?l().filter(z=>z!==m):[...l(),m];n()(w)}function p(){d()([]),n()([])}var k=St(),T=s(k),y=c(s(T),2);i(T);var C=c(T,2),L=c(s(C),2);de(L,21,()=>Ae,_e,(m,w)=>{var z=At(),g=s(z);Te(g);var S=c(g,2),P=s(S),b=c(P,2),j=s(b,!0);i(b),i(S),i(z),B($=>{xa(g,$),Xe(P,`background-color: ${a(w).color??""}`),O(j,a(w).label)},[()=>e().includes(a(w).key)]),We("change",g,()=>o(a(w).key)),I(m,z)}),i(L),i(C);var x=c(C,2),h=c(s(x),2);de(h,21,()=>qa,_e,(m,w)=>{var z=Pt(),g=s(z);Te(g);var S=c(g,2),P=s(S,!0);i(S),i(z),B(b=>{xa(g,b),O(P,a(w).label)},[()=>l().includes(a(w).label)]),We("change",g,()=>u(a(w).label)),I(m,z)}),i(h),i(x),i(k),We("click",y,p),I(t,k),Fe()}var Et=M('<div class="p-4 text-center text-gray-500">Brak obiektów spełniających kryteria wyszukiwania</div>'),Gt=(t,r,e)=>r()(a(e)),Ct=(t,r,e)=>t.key==="Enter"&&r()(a(e)),It=M('<div class="w-4 h-4 rounded-full"></div>'),Lt=M('<div class="w-4 h-4 rounded-full"></div>'),$t=M('<div class="text-xs text-gray-500 mb-1 truncate"> </div>'),Mt=M('<div class="text-xs text-gray-400"> </div>'),Nt=M('<div role="button" tabindex="0"><div class="flex items-start space-x-3"><div class="w-4 h-4 rounded-full mt-1 flex-shrink-0 flex items-center justify-center"><!></div> <div class="flex-1 min-w-0"><h3 class="font-medium text-gray-900 truncate"> </h3> <div class="mt-1 space-y-1"><p class="text-sm text-gray-600"><span class="font-medium">Zajęcia:</span> </p> <p class="text-sm text-gray-500 truncate"><span class="font-medium">Adres:</span> </p> <div class="mt-1"><p class="text-sm text-gray-600"><span class="font-medium"> </span></p> <div class="ml-0 mt-1"><!> <!></div></div></div></div></div></div>'),Ot=M('<div class="bg-white rounded-lg shadow-md"><div class="p-4 border-b border-gray-200"><h2 class="text-lg font-semibold text-gray-800"> </h2></div> <div class="max-h-96 overflow-y-auto"><!></div></div>');function za(t,r){De(r,!0);let e=te(r,"places",19,()=>[]),l=te(r,"selectedPlace",3,null),d=te(r,"onPlaceSelect",3,()=>{});function n(h){if(h.length===0)return"";if(h.length===1)return`${h[0]} lat`;const m=Math.min(...h),w=Math.max(...h);return m===w?`${m} lat`:`${m}-${w} lat`}function o(h){return[...new Set(h.activities.map(w=>w.type))].map(w=>Ae.find(z=>z.key===w))}var u=Ot(),p=s(u),k=s(p),T=s(k);i(k),i(p);var y=c(p,2),C=s(y);{var L=h=>{var m=Et();I(h,m)},x=h=>{var m=Ma(),w=Ye(m);de(w,17,e,z=>z.id,(z,g)=>{const S=Na(()=>o(a(g)));var P=Nt();P.__click=[Gt,d,g],P.__keydown=[Ct,d,g];var b=s(P),j=s(b),$=s(j);{var Z=R=>{var U=It();B(()=>Xe(U,`background-color: ${a(S)[0]?.color||"#3b82f6"}`)),I(R,U)},Q=R=>{var U=Lt();B(V=>Xe(U,`background: conic-gradient(from 0deg, ${V??""})`),[()=>a(S).slice(0,3).map(V=>V?.color||"#3b82f6").join(", ")]),I(R,U)};ce($,R=>{a(S).length===1?R(Z):R(Q,!1)})}i(j);var A=c(j,2),G=s(A),q=s(G,!0);i(G);var J=c(G,2),F=s(J),N=c(s(F));i(F);var Y=c(F,2),X=c(s(Y));i(Y);var le=c(Y,2),ee=s(le),ve=s(ee),ie=s(ve);i(ve),i(ee);var se=c(ee,2),ue=s(se);de(ue,17,()=>a(g).activities.slice(0,3),_e,(R,U)=>{var V=$t(),me=s(V);i(V),B(re=>O(me,`• ${a(U).name??""} (${re??""})`),[()=>n(a(U).ageGroups)]),I(R,V)});var fe=c(ue,2);{var he=R=>{var U=Mt(),V=s(U);i(U),B(()=>O(V,`... i ${a(g).activities.length-3} więcej`)),I(R,U)};ce(fe,R=>{a(g).activities.length>3&&R(he)})}i(se),i(le),i(J),i(A),i(b),i(P),B(R=>{Ne(P,1,`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors
                 ${l()?.id===a(g).id?"bg-blue-50 border-blue-200":""}`),O(q,a(g).name),O(N,` ${R??""}`),O(X,` ${a(g).location.address??""}`),O(ie,`Dostępne zajęcia (${a(g).activities.length??""}):`)},[()=>a(S).map(R=>R?.label).join(", ")]),I(z,P)}),I(h,m)};ce(C,h=>{e().length===0?h(L):h(x,!1)})}i(y),i(u),B(()=>O(T,`Lista obiektów (${e().length??""})`)),I(t,u),Fe()}ea(["click","keydown"]);ea(["click"]);async function Rt(t,r,e,l){const n=t.target.value;if(E(r,n,!0),n.length<3){E(e,!1),E(l,[],!0);return}try{const u=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n)}&limit=5&countrycodes=pl&addressdetails=1`)).json();E(l,u.map(p=>p.display_name),!0),E(e,a(l).length>0)}catch(o){console.error("Error fetching location suggestions:",o),E(e,!1)}}function Dt(t,r,e){if(!a(r).name||!a(r).type||a(r).ageGroups.length===0){alert("Proszę wypełnić wszystkie wymagane pola zajęcia");return}const l={id:Date.now(),name:a(r).name,type:a(r).type,ageGroups:a(r).ageGroups,website:a(r).website||void 0};a(e).activities=[...a(e).activities,l],E(r,{name:"",type:"",ageGroups:[],website:""},!0)}var Ft=M("<option> </option>"),qt=(t,r,e)=>r(e),Ut=M('<button type="button"> </button>'),Vt=M('<div class="bg-gray-100 p-3 rounded flex justify-between items-center"><div class="flex items-center space-x-3"><div class="w-3 h-3 rounded-full"></div> <div><div class="font-medium"> </div> <div class="text-sm text-gray-600"> </div></div></div> <button type="button" class="text-red-600 hover:text-red-800">Usuń</button></div>'),Ht=M('<div class="mt-4"><h4 class="font-medium text-gray-900 mb-3">Dodane zajęcia:</h4> <div class="space-y-2"></div></div>'),Bt=(t,r,e)=>r(a(e)),Jt=M('<button type="button" class="w-full px-3 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none"> </button>'),Kt=M('<div class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-40 overflow-y-auto"></div>'),Wt=(t,r)=>r(),Zt=M('<div class="bg-gray-50 rounded-lg p-4"><div class="flex justify-between items-center mb-3"><h4 class="text-sm font-medium text-gray-700">Struktura danych do wysłania:</h4> <button type="button" class="px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">Kopiuj JSON</button></div> <pre class="text-xs text-gray-800 bg-white p-3 rounded border overflow-x-auto" id="json-preview"><!></pre></div> <div class="mt-3 text-sm text-gray-600"><p><strong>Status danych:</strong></p> <ul class="list-disc list-inside mt-1 space-y-1"><li class="text-red-600"> </li> <li class="text-red-600"> </li> <li class="text-red-600"> </li> <li class="text-orange-600"> </li></ul></div>',1),Yt=M('<div class="bg-gray-50 rounded-lg p-4 text-center text-gray-500"><p>Wypełnij formularz, aby zobaczyć podgląd JSON</p></div>'),Qt=M('<div class="max-w-4xl mx-auto"><div class="bg-white rounded-lg shadow-lg"><div class="p-6"><h2 class="text-2xl font-bold text-gray-900 mb-6">Dodaj nowy obiekt</h2> <form class="space-y-6"><div class="bg-gray-50 p-4 rounded-lg"><h3 class="text-lg font-semibold text-gray-900 mb-4">Informacje o obiekcie</h3> <div class="grid grid-cols-1 gap-4"><div><label for="place-name" class="block text-sm font-medium text-gray-700 mb-2">Nazwa obiektu *</label> <input type="text" id="place-name" required class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="np. Centrum Kultury"/></div></div></div> <div class="bg-gray-50 p-4 rounded-lg"><h3 class="text-lg font-semibold text-gray-900 mb-4">Dodaj zajęcia</h3> <div class="bg-white p-4 rounded border"><h4 class="font-medium text-gray-900 mb-3">Nowe zajęcie</h4> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="activity-name" class="block text-sm font-medium text-gray-700 mb-1">Nazwa zajęcia *</label> <input type="text" id="activity-name" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="np. Balet klasyczny"/></div> <div><label for="activity-type" class="block text-sm font-medium text-gray-700 mb-1">Typ zajęcia *</label> <select id="activity-type" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"><option>Wybierz typ</option><!></select></div> <div class="md:col-span-2"><fieldset><legend class="block text-sm font-medium text-gray-700 mb-1">Grupa wiekowa *</legend> <div class="flex flex-wrap gap-2"></div></fieldset></div> <div class="md:col-span-2"><label for="activity-website" class="block text-sm font-medium text-gray-700 mb-1">Strona internetowa</label> <input type="url" id="activity-website" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="https://example.com"/></div></div> <div class="flex justify-end mt-3"><button type="button" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">Dodaj zajęcie</button></div></div> <!></div> <div class="bg-gray-50 p-4 rounded-lg"><h3 class="text-lg font-semibold text-gray-900 mb-4">Lokalizacja</h3> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="space-y-4"><div><label for="lokalizacja" class="block text-sm font-medium text-gray-700 mb-2">Adres *</label> <div class="relative"><input type="text" id="lokalizacja" required class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Podaj adres..."/> <!></div></div></div> <div><label for="map-container" class="block text-sm font-medium text-gray-700 mb-2">Map lokalizacji</label> <div id="map-container" class="w-full h-64 rounded-md border border-gray-300"></div> <p class="text-sm text-gray-500 mt-1">Kliknij na mapę, aby ustawić dokładną lokalizację</p></div></div></div> <div class="flex justify-end space-x-3"><button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"> </button></div></form></div></div> <div class="max-w-4xl mx-auto mt-6"><div class="bg-white rounded-lg shadow-lg"><div class="p-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Podgląd JSON</h3> <!></div></div></div></div>');function Xt(t,r){De(r,!0);let e=K(ge({name:"",location:{lat:52.2297,lng:21.0122,address:""},activities:[]})),l=K(ge({name:"",type:"",ageGroups:[],website:""})),d,n,o,u,p=K(ge([])),k=K(""),T=K(!1),y=K(!1);ba(async()=>{u=await Qe(()=>import("../chunks/7ah4FPQk.js").then(v=>v.l),[],import.meta.url),await Qe(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),delete u.Icon.Default.prototype._getIconUrl,u.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),n=u.map(d).setView([52.2297,21.0122],11),u.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),o=u.marker([52.2297,21.0122],{draggable:!0}).addTo(n),o.on("dragend",()=>{const v=o.getLatLng();a(e).location={lat:v.lat,lng:v.lng,address:a(e).location.address},E(k,a(e).location.address,!0)}),n.on("click",v=>{const{lat:f,lng:_}=v.latlng;o.setLatLng([f,_]),a(e).location={lat:f,lng:_,address:a(e).location.address}})});function C(v){E(k,v,!0),a(e).location.address=v,E(T,!1),E(p,[],!0),fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}&limit=1&addressdetails=1`).then(f=>f.json()).then(f=>{if(f.length>0){const{lat:_,lon:H}=f[0],D=[parseFloat(_),parseFloat(H)];o.setLatLng(D),n.setView(D,15),a(e).location={lat:D[0],lng:D[1],address:v}}}).catch(f=>console.error("Error fetching coordinates:",f))}function L(v){a(l).ageGroups.includes(v)?a(l).ageGroups=a(l).ageGroups.filter(f=>f!==v).sort((f,_)=>f-_):a(l).ageGroups=[...a(l).ageGroups,v].sort((f,_)=>f-_)}function x(v){a(e).activities=a(e).activities.filter((f,_)=>_!==v)}function h(){if(!a(e).name||a(e).activities.length===0){alert("Proszę wypełnić nazwę obiektu i dodać przynajmniej jedno zajęcie");return}E(y,!0);const v={id:0,name:a(e).name,location:a(e).location,activities:a(e).activities};r.onAddPlace(v),setTimeout(()=>{E(e,{name:"",location:{lat:52.2297,lng:21.0122,address:""},activities:[]},!0),E(k,""),o.setLatLng([52.2297,21.0122]),n.setView([52.2297,21.0122],11),E(y,!1),console.log("Form reset")},1e3)}Re(()=>{E(k,a(e).location.address,!0)});let m=K("");Re(()=>{const v={name:a(e).name,location:{lat:a(e).location.lat,lng:a(e).location.lng,address:a(e).location.address},activities:a(e).activities.map(_=>({name:_.name,type:_.type,ageGroups:_.ageGroups,website:_.website||void 0}))},f=JSON.stringify(v,null,2);E(m,f.replace(/"([^"]+)":/g,'<span class="text-blue-600 font-semibold">"$1":</span>').replace(/: ("[^"]*")/g,': <span class="text-green-600">$1</span>').replace(/: (\[[^\]]*\])/g,': <span class="text-purple-600">$1</span>').replace(/: (\d+(?:\.\d+)?)/g,': <span class="text-orange-600">($1)</span>').replace(/: (null|undefined)/g,': <span class="text-gray-500">$1</span>'),!0)});function w(){const v=document.getElementById("json-preview");if(!v)return;const f=v.textContent||v.innerText||"";navigator.clipboard?navigator.clipboard.writeText(f).then(()=>{const _=event?.target;if(_){const H=_.textContent;_.textContent="✓ Skopiowano!",_.classList.add("bg-green-600"),_.classList.remove("bg-blue-600"),setTimeout(()=>{_.textContent=H,_.classList.remove("bg-green-600"),_.classList.add("bg-blue-600")},2e3)}}).catch(_=>{console.error("Błąd kopiowania: ",_),z(f)}):z(f)}function z(v){const f=document.createElement("textarea");f.value=v,f.style.position="fixed",f.style.left="-999999px",f.style.top="-999999px",document.body.appendChild(f),f.focus(),f.select();try{document.execCommand("copy")}catch(_){console.error("Fallback: Błąd kopiowania",_)}document.body.removeChild(f)}var g=Qt(),S=s(g),P=s(S),b=c(s(P),2),j=s(b),$=c(s(j),2),Z=s($),Q=c(s(Z),2);Te(Q),i(Z),i($),i(j);var A=c(j,2),G=c(s(A),2),q=c(s(G),2),J=s(q),F=c(s(J),2);Te(F),i(J);var N=c(J,2),Y=c(s(N),2),X=s(Y);X.value=X.__value="";var le=c(X);de(le,17,()=>Ae,_e,(v,f)=>{var _=Ft(),H=s(_,!0);i(_);var D={};B(()=>{O(H,a(f).label),D!==(D=a(f).key)&&(_.value=(_.__value=a(f).key)??"")}),I(v,_)}),i(Y),i(N);var ee=c(N,2),ve=s(ee),ie=c(s(ve),2);de(ie,20,()=>Array.from({length:17},(v,f)=>f),_e,(v,f)=>{var _=Ut();let H;_.__click=[qt,L,f];var D=s(_);i(_),B(ne=>{H=Ne(_,1,"px-3 py-1 text-sm rounded-full border transition-colors",null,H,ne),O(D,`${f??""} lat`)},[()=>({"bg-blue-500":a(l).ageGroups.includes(f),"text-white":a(l).ageGroups.includes(f),"border-blue-500":a(l).ageGroups.includes(f),"bg-white":!a(l).ageGroups.includes(f),"text-gray-700":!a(l).ageGroups.includes(f),"border-gray-300":!a(l).ageGroups.includes(f)})]),I(v,_)}),i(ie),i(ve),i(ee);var se=c(ee,2),ue=c(s(se),2);Te(ue),i(se),i(q);var fe=c(q,2),he=s(fe);he.__click=[Dt,l,e],i(fe),i(G);var R=c(G,2);{var U=v=>{var f=Ht(),_=c(s(f),2);de(_,21,()=>a(e).activities,_e,(H,D,ne)=>{const He=Na(()=>Ae.find($e=>$e.key===a(D).type));var xe=Vt(),we=s(xe),ke=s(we),Be=c(ke,2),pe=s(Be),sa=s(pe,!0);i(pe);var je=c(pe,2),oa=s(je);i(je),i(Be),i(we);var Je=c(we,2);Je.__click=()=>x(ne),i(xe),B($e=>{Xe(ke,`background-color: ${a(He)?.color||"#3b82f6"}`),O(sa,a(D).name),O(oa,`${a(He)?.label??""} • ${$e??""} lat`)},[()=>a(D).ageGroups.join(", ")]),I(H,xe)}),i(_),i(f),I(v,f)};ce(R,v=>{a(e).activities.length>0&&v(U)})}i(A);var V=c(A,2),me=c(s(V),2),re=s(me),Pe=s(re),qe=c(s(Pe),2),oe=s(qe);Te(oe),oe.__input=[Rt,k,T,p];var ra=c(oe,2);{var ye=v=>{var f=Kt();de(f,21,()=>a(p),_e,(_,H)=>{var D=Jt();D.__click=[Bt,C,H];var ne=s(D,!0);i(D),B(()=>O(ne,a(H))),I(_,D)}),i(f),I(v,f)};ce(ra,v=>{a(T)&&a(p).length>0&&v(ye)})}i(qe),i(Pe),i(re);var Se=c(re,2),Ee=c(s(Se),2);Ra(Ee,v=>d=v,()=>d),Oa(2),i(Se),i(me),i(V);var Ge=c(V,2),Ce=s(Ge),Ie=s(Ce,!0);i(Ce),i(Ge),i(b),i(P),i(S);var Ue=c(S,2),Le=s(Ue),Ve=s(Le),la=c(s(Ve),2);{var ia=v=>{var f=Zt(),_=Ye(f),H=s(_),D=c(s(H),2);D.__click=[Wt,w],i(H);var ne=c(H,2),He=s(ne);xt(He,()=>a(m)),i(ne),i(_);var xe=c(_,2),we=c(s(xe),2),ke=s(we),Be=s(ke);i(ke);var pe=c(ke,2),sa=s(pe);i(pe);var je=c(pe,2),oa=s(je);i(je);var Je=c(je,2),$e=s(Je);i(Je),i(we),i(xe),B(()=>{O(Be,`Nazwa obiektu: ${a(e).name||"❌ Brak nazwy"}`),O(sa,`Liczba zajęć: ${a(e).activities.length??""} ${a(e).activities.length===0?"❌ Musisz dodać przynajmniej jedno zajęcie":"✅ OK"}`),O(oa,`Adres: ${a(e).location.address||"❌ Podaj adres"}`),O($e,`Nowe zajęcie: ${a(l).name||a(l).type?"⚠️ Uzupełnij i dodaj do listy":"✅ Brak niedokończonych danych"}`)}),I(v,f)},Ua=v=>{var f=Yt();I(v,f)};ce(la,v=>{a(e).name||a(e).activities.length>0?v(ia):v(Ua,!1)})}i(Ve),i(Le),i(Ue),i(g),B(()=>{Ce.disabled=a(y),O(Ie,a(y)?"Dodawanie...":"Dodaj obiekt")}),We("submit",b,v=>{v.preventDefault(),h()}),Ke(Q,()=>a(e).name,v=>a(e).name=v),Ke(F,()=>a(l).name,v=>a(l).name=v),zt(Y,()=>a(l).type,v=>a(l).type=v),Ke(ue,()=>a(l).website,v=>a(l).website=v),Ke(oe,()=>a(k),v=>E(k,v)),I(t,g),Fe()}ea(["click","input"]);function er(t,r){E(r,!a(r))}var ar=M('<meta name="description" content="Przeglądaj zajęcia dodatkowe dla dzieci na interaktywnej mapie"/>'),tr=(t,r)=>E(r,"cards"),rr=M('<div class="flex items-center justify-center h-64"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Ładowanie danych...</p></div></div>'),lr=M('<div class="hidden lg:grid lg:grid-cols-12 lg:gap-6 h-[calc(100vh-300px)]"><div class="lg:col-span-3"><div class="sticky top-6"><!></div></div> <div class="lg:col-span-6"><div class="h-full rounded-lg overflow-hidden shadow-lg"><!></div></div> <div class="lg:col-span-3"><div class="h-full"><!></div></div></div> <div class="lg:hidden space-y-6"><div class="bg-white rounded-lg shadow-md p-4"><div class="flex items-center justify-between"><div class="flex-1"><h2 class="text-lg font-semibold text-gray-800 mb-2">Filtry wyszukiwania</h2> <p class="text-sm text-gray-600"> </p></div> <button class="ml-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"> </button></div></div> <div><div><!></div></div> <div class="h-96 rounded-lg overflow-hidden shadow-lg"><!></div> <div><!></div></div>',1),ir=M('<div class="min-h-screen bg-gray-100"><header class="bg-white shadow-sm border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><h1 class="text-2xl font-bold text-gray-900">Zajęcia dodatkowe dla dzieci</h1> <p class="text-gray-600 mt-1">Odkryj zajęcia dodatkowe w Twojej okolicy</p> <nav class="mt-6"><div class="border-b border-gray-200"><div class="flex space-x-8"><button>Zajęcia</button></div></div></nav></div></header> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"><!></main> <footer class="bg-white border-t mt-12"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"><div class="text-center text-gray-600"><p>&copy; 2024 Zajęcia dodatkowe dla dzieci. Proof of Concept aplikacji.</p></div></div></footer></div>');function vr(t,r){De(r,!0);let e=K(ge([])),l=K(ge([])),d=K(null),n=K(ge([])),o=K(ge([])),u=K(!0),p=K("cards"),k=K(!1);ba(async()=>{try{const A=await fetch("/data.json");E(e,await A.json(),!0),E(l,a(e),!0),E(u,!1)}catch(A){console.error("Error loading places:",A),E(u,!1)}});function T(){E(l,a(e).filter(A=>A.activities.some(G=>!(a(n).length>0&&!a(n).includes(G.type)||a(o).length>0&&!a(o).some(J=>{const F=qa.find(N=>N.label===J);return F?G.ageGroups.some(N=>N>=F.min&&N<=F.max):!1})))),!0)}function y(A){E(n,A,!0),T()}function C(A){E(o,A,!0),T()}function L(A){E(d,A,!0)}function x(A){const G=Math.max(...a(e).map(J=>J.id))+1,q={...A,id:G};E(e,[...a(e),q],!0),E(p,"cards"),E(d,q,!0),console.log("New place added:",q)}Re(()=>{a(e).length>0&&T()});var h=ir();gt(A=>{var G=ar();_t.title="Zajęcia dodatkowe dla dzieci - Mapa",I(A,G)});var m=s(h),w=s(m),z=c(s(w),4),g=s(z),S=s(g),P=s(S);let b;P.__click=[tr,p],i(S),i(g),i(z),i(w),i(m);var j=c(m,2),$=s(j);{var Z=A=>{var G=rr();I(A,G)},Q=A=>{var G=Ma(),q=Ye(G);{var J=N=>{var Y=lr(),X=Ye(Y),le=s(X),ee=s(le),ve=s(ee);ja(ve,{get selectedTypes(){return a(n)},get selectedAgeGroups(){return a(o)},onTypeChange:y,onAgeGroupChange:C}),i(ee),i(le);var ie=c(le,2),se=s(ie),ue=s(se);ka(ue,{get places(){return a(l)},get selectedPlace(){return a(d)},onPlaceSelect:L}),i(se),i(ie);var fe=c(ie,2),he=s(fe),R=s(he);za(R,{get places(){return a(l)},get selectedPlace(){return a(d)},onPlaceSelect:L}),i(he),i(fe),i(X);var U=c(X,2),V=s(U),me=s(V),re=s(me),Pe=c(s(re),2),qe=s(Pe,!0);i(Pe),i(re);var oe=c(re,2);oe.__click=[er,k];var ra=s(oe,!0);i(oe),i(me),i(V);var ye=c(V,2);let Se;var Ee=s(ye);let Ge;var Ce=s(Ee);ja(Ce,{get selectedTypes(){return a(n)},get selectedAgeGroups(){return a(o)},onTypeChange:y,onAgeGroupChange:C}),i(Ee),i(ye);var Ie=c(ye,2),Ue=s(Ie);ka(Ue,{get places(){return a(l)},get selectedPlace(){return a(d)},onPlaceSelect:L}),i(Ie);var Le=c(Ie,2),Ve=s(Le);za(Ve,{get places(){return a(l)},get selectedPlace(){return a(d)},onPlaceSelect:L}),i(Le),i(U),B((la,ia)=>{O(qe,a(n).length>0||a(o).length>0?`Aktywne filtry: ${a(n).length} typów, ${a(o).length} grup wiekowych`:"Brak aktywnych filtrów"),O(ra,a(k)?"Ukryj filtry":"Pokaż filtry"),Se=Ne(ye,1,"transition-all duration-300 overflow-hidden",null,Se,la),Ge=Ne(Ee,1,"transform",null,Ge,ia)},[()=>({hidden:!a(k)}),()=>({"-translate-y-full":!a(k)})]),I(N,Y)},F=N=>{Xt(N,{onAddPlace:x})};ce(q,N=>{a(p)==="cards"?N(J):N(F,!1)})}I(A,G)};ce($,A=>{a(u)?A(Z):A(Q,!1)})}i(j),Oa(2),i(h),B(A=>b=Ne(P,1,"py-2 px-1 border-b-2 font-medium text-sm transition-colors",null,b,A),[()=>({"border-blue-500":a(p)==="cards","text-blue-600":a(p)==="cards","border-transparent":a(p)!=="cards","text-gray-500":a(p)!=="cards"})]),I(t,h),Fe()}ea(["click"]);export{vr as component};
